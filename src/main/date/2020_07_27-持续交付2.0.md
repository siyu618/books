# 持续交付 2.0
* 解决问题的一个重要前提：能够正确定义问题，并达成共识。


## Chapter 1：持续交付 2.0
### 1. 软件工程的发展
* 瀑布开发
* 敏捷
* DevOps 运动
* 持续交付 1.0
   * 关注于从提交代码到产品发布
   * 敏捷：产品、开发、测试
   * DevOps：开发、测试、运维
   * 持续交付1.0：产品、开发、测试、运维

### 2. 持续交付 2.0
* 精益思想：开发、测量、认知
   * 消除所有浪费：识别和消除一切浪费
* 双环模型
   * 探索环：提问、锚定、共创、精炼
      * 提问：定义问题。
      * 锚定：定义结果目标指示器。
      * 共创：共同探索和创造解决或验证该问题的多种具有可行性的解决方案。 
      * 精炼：对所有可行实验方案进行选择，找到最小可行性解决方案，它既可能是单个方案，也可能是多个方案组合。
   * 验证环：构建、运行、监控、决策
      * 构建：值根据非数字化描述，将最小可行性解决方案准确地转换成符合质量要求的软件包
      * 运行：将达到质量要求的软件包部署到生产环境或者交到用户手中，并使之为用户提供服务。 
      * 检测：收集生产系统的数据，对系统进行监控，确保其正常运行。同时将业务数据以适当的形式及时呈现出来。 
      * 决策：将收集到的数据信息与探索环得出的对应目标进行对比分析，做出决策，确定下一步方向。
   * 4 个核心原则
      * 1. 坚持少做
      * 2. 持续分解问题
      * 3. 坚持快速反馈
      * 4. 持续改进并衡量
   * CALMS 模型
      * 协作、自动化、精益生产、度量 和 分享

## Chapter 2：价值环探索
### 1. 探索环的意义
* 风险假设
   * 1. 用户假设：我们提供的产品是针对某类潜在用户人群的需求的假设
   * 2. 问题假设：目标用户群之所以有这种假设，是因为他们的确存在某些痛点（或问题）需要解决的加色。
   * 3. 解决方案假设：我们提供的解决方案可以解决这些痛点或问题，而且比其他现存的解决方案都有效其高效。

### 2. 四个环节
* 提问：WWH
* 锚定
   * 目标的选择：一是识别价值指标，而非虚荣指标；而是指标应该可衡量且可获取，易于客观对比。 
* 共创：
   * 量化式影像地图：Why-Who-How-What
   * 用户旅行地图
* 精炼

### 3. 工作原则
* 分解并快速试错
* 一次只验证已给点
* 允许失败

### 4. 共创与精炼的常用方法
* 装饰窗方法
* 最小可行性法
* 特区法
* 定向探索法
* 稻草人法
* 最小可行产品法

### 5. 实施注意事项
* 多角色参与探索
* 存在往复过程
* 风险不是等价的
* 上帝视角
* 唯数字论
* 蛇形效应            


## Chapter 3：快速验证环
### 1. 目标
* 前提是团队已经达成共识，所选的方案是当前所处环境下，验证或解决业务领域问题的最佳方法。
* 目标：借助各种方法与工具，让质量可靠的解决方案以最快的速度到达客户手中，从而手机并分析真实的反馈。 

### 2. 工作远侧
* 质量内建
* 消除等待
* 尽量并行：重复事务自动化
* 监测一切：应用健康检测、业务健康监测


## Chapter 4：持续交付 2.0 的组织文化
### 4.1 安全、信任与持续改善
* 失败是安全的
* 相互信任
* 持续改善

### 4.2 文化塑造四步法
* 行文决定文化
   * 定义我们要做的事情
   * 定义我们期望的做事方式或方法
   * 提供相应的培训，使员工具备完成其工作的能力
   * 设计一些必要的机制或措施来强化我们所鼓励的那些行为

### 4.3 行动原则
1. 价值导向
2. 快速验证
3. 持续学习：定期恢复、复盘   

### 4.4 度量原则
* ”如果不能度量，就无法改进。（You can't manage What you can't measure）“
* 度量指标的四类属性
   * 引领性指标和滞后性指标
   * 可观测性指标与可行动性指标
* 度量的目标是改善

### 4.5 ”改善套路“进行持续改进
* 明确方向
* 掌握当前状态
* 定一下一个目标状态
* 迭代改进

## Chapter 5：持续交付的软件系统架构
### 5.1 ”大系统小做“原则
* 持续交付的架构需要
   * 为测试而设计
   * 为部署而设计
   * 为监控而设计
   * 为扩展而设计
   * 为失效而设计
* 系统拆分原则
   * 作为系统的一部分，每个组件或服务有清晰的月业务职责，可以别独立修改，甚至被另一种实现方案所替代。
   * ”高内聚、低耦合“，使整个系统易于维护，每个组件或服务只知道尽可能少的信息，完成相对独立的的单一功能。
   * 整个系统易于构建与测试。
   * 是团队新恒远之间的沟通协作更加顺畅。

### 5.2 常见架构模式
* 微核架构（microcore architecture）：也叫插件架构（plugin architecture）
* 微服务架构（microservice Architecture）
* 巨石应用（monolithic Application）

### 5.3 架构改造实施模式
* 拆迁者模式：一次性完全替代原有的系统。
* 绞杀者模式：新功能逐渐换原有功能。
* 修缮者模式

### 数据库拆分方法：


## Chapter 6：业务需求协作管理
* 产品的整个生命周期：概念阶段、孵化阶段、验证阶段、运营阶段和业务退市阶段。

### 6.1 产品生命周期概述
* 准备期
* 交付期

### 6.2 需求拆分的利与弊
* 收益
   * 建立共识，协调工作
   * 小批量交付，加速价值流动
   * 低成本拥抱变化
   * 多次集成，及时反馈质量
   * 鼓舞团队士气
* 成本
   * 需求分解时的显示成本
   * 分批开发、测试和部署的迭代成本

### 6.3 需求拆分方法
* 需求来源
* 技术债业务需求   
* 参与需求拆分的角色
* 不平等的 INVEST 原则
   * Independent
   * Negotiable
   * Valuable
   * Estimable
   * Samll & Similar size
   * testable
* 五大拆分方法
   * 路劲拆分法
   * 按接触点拆分
   * 按数据路径或格式拆分
   * 按规则拆分
   * 按探索路径拆分
* 七大组成部分
   * 编号：方便记录与跟踪
   * 名称：该功能机器目标概要
   * 描述：简单介绍这个功能的上下文和业务目的要求
   * 技术备忘：简单记录每次讨论过程中的一些重要结束点，可能会包括一些涉及信息
   * 前提假设：对该用户股市进行估算或启动试验时，应该满足那些前提假设
   * 验收条件：该用户故事达到交付标准的定义与描述

### 6.4 需求分析与管理工具集
* 用户故事地图
* 用户故事树
* 依赖关系图
* 需求管理数字平台化

### 6.5 团队协作管理工具
* 团队共享日历
* 团队回顾：非暴力沟通
* 可视化故事墙
* 明确”完成“的定义
* 持续集成
* 故事验证


## Chapter 7：部署流水线原则与工具设计
* 四大基础支撑服务
   * 编译构建服务
   * 自动化测试服务
   * 部署管理服务
   * 基础环境服务
* 三大受信源
   * 需求管理仓库
   * 源代码仓库
   * 制品库
* 让部署流水线发挥最大的作用，研发团队需要尽可能遵守以下 5 条原则
   * 1. 任何软件包的取用皆需通过受控源，个角色之间禁止通过私有渠道获取
   * 2. 尽可能将一起流程自动化，并持续优化执行时间
   * 3. 每次提交都能够自动触发部署流水线
   * 4. 尽可能地少用手动触发方式
   * 5. 必须执行立即暂停原则（stop the line）   

## Chapter 8：利于集成的分支策略
* 常见分支开发模式
   * 主干开发，主干发布
   * 主干开发，分支发布
   * 分支开发，主干发布

* 选择分支模式的原则：
   * 分支越少越好，最好只有一条主干
   * 分支生存周期越短越好，最好在 3 天以内
   * 在业务允许的前提下，发布周期越短越好

## Chapter 9：持续集成
* 六步提交法
   * 检出最近成功的代码
   * 修改代码
   * 第一次个人构建
   * 第二期个人构建
   * 提交代码到团队主干
   * 提交构建 

## Chapter 10：自动化测试策略与方法
* 自动化测试金字塔
   * UI 测试
   * 服务测试
   * 单元测试   

## Chapter 11：软件配置管理
* 将一切纳入配置管理
   * 配置管理数据库（Configuration Management Database，CMDB）   

## Chapter 12：低风险发布
* 高频发布是一种趋势
* 降低发布风险的方法
   * 1. 蓝绿部署
   * 2. 滚动部署
   * 3. 金丝雀发布与灰度发布
   * 4. 安部署
* 高频发布支撑技术
   * 功能开关
   * 数据库迁移
   * 抽象分支方法
   * 升级替代回滚   

## Chapter 13：检测与决策
* 生产监测范围
   * 监测的层次：资源监测、应用监测和业务监测。
   * 后台服务的监测 + 分发软件的监测
* 数据监测体系
   * 收集和处理
   * 数据的标准化
   * 监测数据体系及其能力衡量
      * 真确性
      * 全面性
      * 及时性
* 问题处理体系
   * 告警海洋与智能化管理
   * 问题处理是一个学习过程
* 生产环境测试
   * 测试活动的扁平化趋势
   * 生产环境中的测试
   * 混沌工程（Chaos Engineering）      
* 测试的左移还是右移


## Chapter 14：大型互联网团队的 FT 化
* 架构结构阶段
* 组织解耦阶段
* 研发流程再造阶段
* 自动化提升效率阶段   

## Chapter 15：小团队的逆袭之旅
* Scrum
* 方法：目标驱动、从简单问题开始、持续改善

## Chapter 16：研发推动的 DevOps
* 敏捷 101 到 DevOps

## 附录 A：软件工程的三次进化
* 瀑布开发模型
* 敏捷开发
   * 螺旋模型
   * 敏捷宣言
* DevOps   
